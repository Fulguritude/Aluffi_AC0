\section*{Section 4)}

\subsection*{4.1)}

Composition is defined for \textit{two} morphisms. If more than 2 morphisms are given, one may compose them in several ways, so that every step only consists in composing 2 morphisms. Prove that for any such valid sequence of morphisms, the order of parentheses doesn't matter.

This boils down to showing that associativity is a global property, that doesn't just make parentheses meaningless when there are 3 elements and 2 operators between them, but in general $n$ elements with $(n-1)$ operators between them.

Note: A useful way of visualizing this is representing the order of operations as a binary tree, and noticing that applying associativity (forwards or backwards) is just a tree rotation (resp. right or left) at a given node. Then it is easy to show that one can always obtain a "left comb binary tree". Since every choice of parentheses is equal to this left comb choice, and equality is transitive, every choice of parentheses is equal to every other choice.

To be more rigorous, we will proceed by induction.

\underline{Hypothesis:} $P(n)$ = "for a given $n$, for $f_n f_{n-1} \cdot f_1$ any valid, composable, ordered sequence of morphisms in our base category $\mathcal{C}$, any choice $H$ of parentheses to compose elements of this sequence 2-by-2, giving a formula $s_H$, will lead to the same result, which can be seen by always having $s_H = (\cdot(f_n f_{n-1}) \cdot) f_1$".

\underline{Initialization:} We initialize at $n = 3$; the validity is immediate as it is precisely the definition of associativity.

\underline{Heredity:} We suppose the hypothesis $P(n)$ true for a given $n \geq 3$; let us show that this implies that the hypothesis is true for $P(n+1)$.

What this means is that, no matter the composable ordered sequence $f_n f_{n-1} \cdot f_1$ of $n$ functions, for a fixed $n$, the order of parentheses does not matter. Note that though $n$ is chosen and fixed; the statement is true for EVERY (ordered, composable) sequence of functions. We add a new function $g$ to this sequence. By a simple renaming of the functions, we deduce that it doesn't matter where we insert $g$, so we'll insert it at the very right to simplify our argument, giving us the sequence $f_n f_{n-1} \cdot f_1 g$.

Here, there are 3 cases. Either:
\begin{itemize}
	\item $g$ is part of the last composition (i.e., it's not in a semantically necessary parenthethical grouping; it can be made external to all parentheses),
	\item $g$ is part of the first composition (i.e., the first operation is $(f_1 g)$)
	\item it isn't either (it's inside some non-removable parentheses, and needs to be composed earlier on, but not as the first operation).
\end{itemize}

If $g$ is part of the last composition, then by applying the hypothesis $P(n)$ to the terms $f_n f_{n-1} \cdot f_1$, we immediately find that our new sequence can be made equal to $((\cdot(f_n f_{n-1}) \cdot) f_1) g$, which is precisely what we wanted for $P(n+1)$.

If $g$ is part of the first composition, we isolate it so that it isn't anymore. To do so, we apply "backwards" associativity on the grouping of terms $F_k (f_1 g)$ in order to obtain $(F_k f_1) g$, where $F_k$ is the appropriate choice of $(f_k \cdot f_2)$ such that associativity can be applied (with $2 \leq k \leq n$). This makes it so that our problem is identical to our final case, solved just below.

If $g$ is part of neither the first nor last composition, then we consider the innermost composition $(f_k f_{k-1})$ to be a single element $h$. We now have a sequence of only $n$ terms. We apply our hypothesis $P(n)$. This makes $g$ the outermost right term, part of the last composition. Unravelling $h$ back into two members, we see that we are back at our initial case, with an arbitrary order of parentheses for the $f_n f_{n-1} \cdot f_1$ terms, and $g$ outermost. We already saw that this implied $P(n+1)$.

\underline{Conclusion:} since we have initialization and heredity of our hypothesis in all cases, we can conclude by induction that it is true for all $n \geq 3$.



\subsection*{4.2)}

In Example 3.3 we have seen how to construct a category from a set endowed with a relation, provided the latter is reflexive and transitive. For what types of relations is the corresponding category a groupoid (cf. Example 4.6) ?

We remind example 4.6 : a groupoid is a category in which every morphism is an isomorphism. This means that every morphism needs to be 2-way invertible.

In this context, this means that for every morphism $a \sim b$, there should be a corresponding inverse morphism $b \sim a$. This property is precisely the symmetry of a relation.

This means that all sets with an equivalence relation can be reconstructed into a groupoid.



\subsection*{4.3)}

Let $A$, $B$ be objects of a category $\mathcal{C}$, and $f \in Hom_{\mathcal{C}} (A, B)$ a morphism. Prove that if $f$ has a pre-inverse, then $f$ is an epimorphism. Show that the converse does not hold, by giving an explicit example of a category and an epimorphism without a pre-inverse.

\subsubsection*{4.3.a)} $f$ has a pre-inverse $\Rightarrow$ $f$ is an epimorphism

Let $\mathcal{C}$ be a category. Let $f \in Hom_{\mathcal{C}} (A, B)$, having some pre-inverse which we'll call $g \in Hom_{\mathcal{C}} (B, A)$:

Let $Z$ be an arbitrary object of $\mathcal{C}$, and $\beta', \beta" \in Hom_{\mathcal{C}} (B, Z)$:

$$
\begin{aligned}
	\beta' \circ f = \beta'' \circ f
		& \Rightarrow (\beta' \circ  f) \circ g  = (\beta'' \circ  f) \circ g  \\
		& =            \beta' \circ (f  \circ g) =  \beta'' \circ (f  \circ g) \\
		& =            \beta' \circ id_B         =  \beta'' \circ id_B \\
		& =            \beta'                    =  \beta''
\end{aligned}
$$

This means that $f$ is an epimorphism.


\subsubsection*{4.3.b)} $f$ is an epimorphism $\notRightarrow$ $f$ has a pre-inverse

As was mentioned in the text, "order" categories (poset categories) where there's only at most one morphism between any two objects makes it so that every morphism is trivially an epimorphism. However, only identities have any kind of inverse (since they are isomorphisms, they are their own inverse).

See also \href{https://ncatlab.org/nlab/show/partial+order}{here} and \href{https://math.stackexchange.com/questions/81123/examples-of-categories-where-epimorphism-does-not-have-a-right-inverse-not-surj}{here}.



\subsection*{4.4)}

Prove that the composition of two monomorphisms is a monomorphism. Deduce that one can define a subcategory $\mathcal{C}_{mono}$ of a category $\mathcal{C}$ by taking the same objects as in $\mathcal{C}$, and defining $Hom_{\mathcal{C}_{mono}} (A, B)$ to be the subset of $Hom_\mathcal{C} (A, B)$ consisting of monomorphisms, for all objects $A$, $B$. (Cf. Exercise 3.8; of course, in general $\mathcal{C}_{mono}$ is not full in $\mathcal{C}$.) Do the same for epimorphisms. Can you define a subcategory $\mathcal{C}_{nonmono}$ of $\mathcal{C}$ by restricting to morphisms that are not monomorphisms?

\subsubsection*{4.4.a)} Mono

Let be $f \in Hom_{\mathcal{C}} (A, B)$ and $g \in Hom_{\mathcal{C}} (B, C)$ be monomorphisms. Let us show that $g \circ f$ is also a monomorphism.

Let $Z$ be an arbitrary object of $\mathcal{C}$, and $\alpha', \alpha" \in Hom_{\mathcal{A}} (Z, A)$:

$$
\begin{aligned}
	(g \circ f) \circ \alpha' = (g \circ f) \circ \alpha''
		& = g \circ (f \circ \alpha') = g \circ (f \circ \alpha'') \\
		& \Rightarrow f \circ \alpha' = f \circ \alpha'' \text{ because $g$ is mono} \\
		& \Rightarrow         \alpha' =         \alpha'' \text{ because $f$ is mono}
\end{aligned}
$$

This means that the composition of 2 monomorphisms is always an monomorphism. We can thus make a subcategory. Taking all objects, properties, and homsets of $\mathcal{C}$, but restricting the homsets only to the monomorphisms, we know that this makes a new category $\mathcal{C}_{mono}$ since it is closed under composition, has identities (which are iso, and \textit{a fortiori} mono) and associativity.


\subsubsection*{4.4.b)} Epi

Let be $f \in Hom_{\mathcal{C}} (A, B)$ and $g \in Hom_{\mathcal{C}} (B, C)$ be epimorphisms. Let us show that $g \circ f$ is also a epimorphism.

Let $Z$ be an arbitrary object of $\mathcal{C}$, and $\beta', \beta" \in Hom_{\mathcal{C}} (C, Z)$:

$$
\begin{aligned}
	\beta' \circ (g \circ f) = \beta'' \circ (g \circ f)
		& = (\beta' \circ g) \circ f = (\beta'' \circ g) \circ f \\
		& \Rightarrow \beta' \circ g =  \beta'' \circ g \text{ because $f$ is epi} \\
		& \Rightarrow \beta'         =  \beta''         \text{ because $g$ is epi}
\end{aligned}
$$

This means that the composition of 2 epimorphisms is always an epimorphism. We can thus make a subcategory. Taking all objects, properties, and homsets of $\mathcal{C}$, but restricting the homsets only to the epimorphisms, we know that this makes a new category $\mathcal{C}_{epi}$ since it is closed under composition, has identities (which are iso, and \textit{a fortiori} epi) and associativity.


\subsubsection*{4.4.c)} Nonmono and nonepi

We could consider the fact that (TODO prove lol) we can't obtain a monomorphism from the composition of two non-monomorphisms (you need at least one monomorphism in the mix). However, the real problem is identities. Identities are iso, and thus mono. You can't make a category without identities, so there is no such $\mathcal{C}_{nonmono}$. the same reasoning applies to $\mathcal{C}_{nonepi}$.



\subsection*{4.5)}

Give a concrete description of monomorphisms and epimorphisms in the category $\mathbf{MSet}$ you constructed in Exercise 3.9. (Your answer will depend on the notion of morphism you defined in that exercise!)

We'll use our $\mathbf{CMSet}$ construction, where elements of multisets consisted of a pair of the set-element and its count in the multiset. 

We recall that in the way we formulated this, morphisms were just simple set functions on "(element, count)" pairs (i.e., returning any other "(element, count)" pair of the codomain). Let be a morphism of multisets $f \in (A \to B)$. Labelling the elements of the domain $A$ as $a_i$ and of the codomain $B$ as $b_j$ with $i \in I$, $j \in J$, and $I, J$ any two indexing sets such that $card(A) = card(I)$ and $card(B) = card(J)$, we can see that $A$ and $B$ now just look like "normal" sets.

We now simply recycle the notion of injections and surjections. These form our monomorphisms and epimorphisms respectively.


